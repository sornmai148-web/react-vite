import{h as l,m as U,o as W,q}from"./index-Dlbt45EP.js";const G=(e,n,a,u)=>{const i=[a,{code:n,...u||{}}];if(e?.services?.logger?.forward)return e.services.logger.forward(i,"warn","react-i18next::",!0);d(i[0])&&(i[0]=`react-i18next:: ${i[0]}`),e?.services?.logger?.warn?e.services.logger.warn(...i):console?.warn&&console.warn(...i)},I={},P=(e,n,a,u)=>{d(a)&&I[a]||(d(a)&&(I[a]=new Date),G(e,n,a,u))},j=(e,n)=>()=>{if(e.isInitialized)n();else{const a=()=>{setTimeout(()=>{e.off("initialized",a)},0),n()};e.on("initialized",a)}},C=(e,n,a)=>{e.loadNamespaces(n,j(e,a))},T=(e,n,a,u)=>{if(d(a)&&(a=[a]),e.options.preload&&e.options.preload.indexOf(n)>-1)return C(e,a,u);a.forEach(i=>{e.options.ns.indexOf(i)<0&&e.options.ns.push(i)}),e.loadLanguages(n,j(e,u))},X=(e,n,a={})=>!n.languages||!n.languages.length?(P(n,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:n.languages}),!0):n.hasLoadedNamespace(e,{lng:a.lng,precheck:(u,i)=>{if(a.bindI18n&&a.bindI18n.indexOf("languageChanging")>-1&&u.services.backendConnector.backend&&u.isLanguageChangingTo&&!i(u.isLanguageChangingTo,e))return!1}}),d=e=>typeof e=="string",Y=e=>typeof e=="object"&&e!==null,$=l.createContext();class B{constructor(){this.usedNamespaces={}}addUsedNamespaces(n){n.forEach(a=>{this.usedNamespaces[a]||(this.usedNamespaces[a]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}var H=U();const J=(e,n)=>d(n)?n:Y(n)&&d(n.defaultValue)?n.defaultValue:Array.isArray(e)?e[e.length-1]:e,K={t:J,ready:!1},Q=()=>()=>{},D=(e,n={})=>{const{i18n:a}=n,{i18n:u,defaultNS:i}=l.useContext($)||{},t=a||u||W();t&&!t.reportNamespaces&&(t.reportNamespaces=new B),t||P(t,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const g=l.useMemo(()=>({...q(),...t?.options?.react,...n}),[t,n]),{useSuspense:N,keyPrefix:y}=g,w=e||i||t?.options?.defaultNS,O=d(w)?[w]:w||["translation"],f=l.useMemo(()=>O,O);t?.reportNamespaces?.addUsedNamespaces?.(f);const R=l.useRef(0),k=l.useCallback(r=>{if(!t)return Q;const{bindI18n:s,bindI18nStore:o}=g,c=()=>{R.current+=1,r()};return s&&t.on(s,c),o&&t.store.on(o,c),()=>{s&&s.split(" ").forEach(b=>t.off(b,c)),o&&o.split(" ").forEach(b=>t.store.off(b,c))}},[t,g]),_=l.useRef(),v=l.useCallback(()=>{if(!t)return K;const r=!!(t.isInitialized||t.initializedStoreOnce)&&f.every(M=>X(M,t,g)),s=n.lng||t.language,o=R.current,c=_.current;if(c&&c.ready===r&&c.lng===s&&c.keyPrefix===y&&c.revision===o)return c;const E={t:t.getFixedT(s,g.nsMode==="fallback"?f:f[0],y),ready:r,lng:s,keyPrefix:y,revision:o};return _.current=E,E},[t,f,y,g,n.lng]),[z,A]=l.useState(0),{t:x,ready:p}=H.useSyncExternalStore(k,v,v);l.useEffect(()=>{if(t&&!p&&!N){const r=()=>A(s=>s+1);n.lng?T(t,n.lng,f,r):C(t,f,r)}},[t,n.lng,f,p,N,z]);const m=t||{},h=l.useRef(null),S=l.useRef(),L=r=>{const s=Object.getOwnPropertyDescriptors(r);s.__original&&delete s.__original;const o=Object.create(Object.getPrototypeOf(r),s);if(!Object.prototype.hasOwnProperty.call(o,"__original"))try{Object.defineProperty(o,"__original",{value:r,writable:!1,enumerable:!1,configurable:!1})}catch{}return o},F=l.useMemo(()=>{const r=m,s=r?.language;let o=r;r&&(h.current&&h.current.__original===r?S.current!==s?(o=L(r),h.current=o,S.current=s):o=h.current:(o=L(r),h.current=o,S.current=s));const c=[x,o,p];return c.t=x,c.i18n=o,c.ready=p,c},[x,m,p,m.resolvedLanguage,m.language,m.languages]);if(t&&N&&!p)throw new Promise(r=>{const s=()=>r();n.lng?T(t,n.lng,f,s):C(t,f,s)});return F};export{D as u};
